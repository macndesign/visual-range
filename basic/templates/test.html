<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Test django Tastypie</title>
    <style type="text/css">
        label { display: block }
    </style>
    <script type="text/javascript" src="{{ STATIC_URL }}jquery-1.7.2.min.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){

        var data = '';

        $('button').click(function () {
            data = JSON.stringify({
                "content": $('#content').val(),
                "is_active": $('#is_active').val(),
                "title": $('#title').val(),
                "slug": $('#slug').val(),
                "user": $('#user').val()
            });
        });

        $('#new').click(function () {
            $.ajax({
                type: 'POST',
                url: '/api/v1/notes/',
                data: data,
                success: function(data){return 'success: ' + data},
                error: function(data) {return 'error: ' + data},
                dataType: 'application/json',
                processData:  false,
                contentType: 'application/json'
            });
        });

        $('#list').click(function () {
            $.ajax({
                url: '/api/v1/notes/?format=json',
                type: 'GET',
                accepts: 'application/json',
                dataType: 'json',
                success: function (data) {
                    var objects = data.objects;
                    for (var i = 0; i < objects.length; i ++) {
                        $('#notes').append('<li>' + objects[i].id + ' - ' + objects[i].title + '</li>');
                    }
                }
            })
        });

        $('#delete').click(function () {
            $.ajax({
                url: '/api/v1/notes/' + $('#id').val() + '/',
                type: 'DELETE',
                accepts: 'application/json',
                dataType: 'json'
            })
        });

        $('#detail').click(function () {
            $.ajax({
                url: '/api/v1/notes/' + $('#id').val() + '/?format=json',
                type: 'GET',
                accepts: 'application/json',
                dataType: 'json',
                success: function (data) {
                    console.log(data);
                    $('#content').val(data.content);
                    $('#is_active').val(data.is_active);
                    $('#title').val(data.title);
                    $('#slug').val(data.slug);
                    $('#user').val(data.user);
                }
            })
        });

        $('#edit').click(function () {

            var data_edited = JSON.stringify({
                "content": $('#content').val(),
                "is_active": $('#is_active').val(),
                "title": $('#title').val(),
                "slug": $('#slug').val(),
                "user": $('#user').val()
            });

            $.ajax({
                type: 'PUT',
                url: '/api/v1/notes/' + $('#id').val() + '/',
                data: data_edited,
                success: function(data){return 'success: ' + data},
                error: function(data) {return 'error: ' + data},
                dataType: 'application/json',
                processData:  false,
                contentType: 'application/json'
            });
        });

    });
    </script>
</head>
<body>
<label>id: <input id="id" type="text"></label>
<label>content: <input id="content" type="text"></label>
<label>is_active: <input id="is_active" type="text"></label>
<label>title: <input id="title" type="text"></label>
<label>slug: <input id="slug" type="text"></label>
<label>user: <input id="user" type="text"></label>
<button id="list">list</button> <!-- GET -->
<button id="new">new</button> <!-- POST -->
<button id="detail">detail</button> <!-- GET -->
<button id="edit">edit</button> <!-- PUT -->
<button id="delete">delete</button> <!-- DELETE -->

<ul id="notes"></ul>

</body>
</html>